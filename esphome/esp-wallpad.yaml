---
substitutions:
  name: esp-wallpad
  friendly_name: ESP WallPad

esphome:
  name: esp-wallpad

devices:
  - id: living_room_ceiling_light
    name: "거실 천장등"
  - id: living_room_front_plug
    name: "거실 앞쪽 플러그"
  - id: living_room_rear_plug
    name: "거실 뒤쪽 플러그"
  - id: kitchen_ceiling_light
    name: "주방 천장등"
  - id: kitchen_gasvalve
    name: "주방 가스밸브"
  - id: entrance_ceiling_light
    name: "현관 천장"
  - id: room_1_heater_1
    name: "Room 1 Heater 1"

#   areas:
#     - id: kitchen
#       name: "주방"
#     - id: living_room
#       name: "거실"
#     - id: front_door
#       name: "현관"

esp32:
  board: m5stack-atom
  framework:
    type: arduino

# https://github.com/eigger/espcomponents/tree/master/packages/wallpad
packages:
  remote:
    refresh: always
    url: https://github.com/eigger/espcomponents/
    files:
      - packages/device_base.yaml
      - packages/esp32.yaml
      # - packages/wallpad/hyundai/hyundai_imazu.yaml

uart:
  baud_rate: 9600
  data_bits: 8
  parity: NONE
  stop_bits: 1
  rx_pin: GPIO22
  tx_pin: GPIO19

external_components:
  - source: github://eigger/espcomponents/relreases/latest
    components: [uartex]
    refresh: always

uartex:
  rx_timeout: 10ms
  tx_delay: 50ms
  tx_timeout: 500ms
  tx_retry_cnt: 3

  rx_header: [0xf7]
  rx_footer: [0xee]
  tx_header: [0xf7]
  tx_footer: [0xee]

  rx_checksum: xor
  tx_checksum: xor

  version:
    disabled: false
  error:
    disabled: false
  log:
    disabled: false

# sensor:
#   - platform: uartex
#     name: "Room 1 Plug 0 Power"
#     unit_of_measurement: "W"
#     state: [0x12, 0x01, 0x1f, 0x04, 0x40, 0x10]
#     state_number:
#       offset: 8
#       length: 2
#       precision: 0

#   - platform: uartex
#     name: "Room 1 Plug 1 Power"
#     unit_of_measurement: "W"
#     state: [0x12, 0x01, 0x1f, 0x04, 0x40, 0x11]
#     state_number:
#       offset: 8
#       length: 2
#       precision: 0

#   - platform: uartex
#     name: "Room 2 Plug 1 Power"
#     unit_of_measurement: "W"
#     state: [0x12, 0x01, 0x1f, 0x04, 0x40, 0x21]
#     state_number:
#       offset: 8
#       length: 2
#       precision: 0

#   - platform: uartex
#     name: "Room 2 Plug 2 Power"
#     unit_of_measurement: "W"
#     state: [0x12, 0x01, 0x1f, 0x04, 0x40, 0x22]
#     state_number:
#       offset: 8
#       length: 2
#       precision: 0

switch:
  # 켜기
  #   Command: 0xf7,0x0b,0x01,0x1f,0x02,0x40,0x21,0x01,0x00,0x80,0xee
  #   ACK:     0xf7,0x0b,0x01,0x1f,0x04,0x40,0x21,0x01,0x01,0x87,0xee
  # 끄기
  #   Command: 0xf7,0x0b,0x01,0x1f,0x02,0x40,0x21,0x02,0x00,0x83,0xee
  #   ACK:     0xf7,0x0b,0x01,0x1f,0x04,0x40,0x21,0x02,0x02,0x87,0xee
  # 켜기 상태
  #   0xF7,0x12,0x01,0x1F,0x04,0x40,0x21,0x00,0x01,0x00,
  #   0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x9E,0xEE
  # 끄기 상태
  #   0xF7,0x12,0x01,0x1F,0x04,0x40,0x21,0x00,0x02,0x00,
  #   0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x9D,0xEE
  - platform: uartex
    name: "Room 1 Plug 0"
    icon: "mdi:power-socket-de"
    state:
      data: [0x00, 0x01, 0x1f, 0x04, 0x40, 0x10]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_on:
      offset: 7
      data: [0x01]
    state_off:
      offset: 7
      data: [0x02]
    command_on:
      data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x10, 0x01, 0x00]
      ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x10, 0x01, 0x01]
    command_off:
      data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x10, 0x02, 0x00]
      ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x10, 0x02, 0x02]

  - platform: uartex
    name: "Room 1 Plug 1"
    icon: "mdi:power-socket-de"
    state:
      data: [0x00, 0x01, 0x1f, 0x04, 0x40, 0x11]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_on:
      offset: 7
      data: [0x01]
    state_off:
      offset: 7
      data: [0x02]
    command_on:
      data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x11, 0x01, 0x00]
      ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x11, 0x01, 0x01]
    command_off:
      data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x11, 0x02, 0x00]
      ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x11, 0x02, 0x02]

  - platform: uartex
    name: "Room 1 Plug 2"
    icon: "mdi:power-socket-de"
    state:
      data: [0x00, 0x01, 0x1f, 0x04, 0x40, 0x12]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_on:
      offset: 7
      data: [0x01]
    state_off:
      offset: 7
      data: [0x02]
    command_on:
      data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x12, 0x01, 0x00]
      ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x12, 0x01, 0x01]
    command_off:
      data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x12, 0x02, 0x00]
      ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x12, 0x02, 0x02]

  # - platform: uartex
  #   name: "Room 2 Plug 1"
  #   icon: "mdi:power-socket-eu"
  #   state:
  #     data: [0x00, 0x01, 0x1F, 0x04, 0x40, 0x21]
  #     mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
  #   state_on:
  #     offset: 7
  #     data: [0x01]
  #   state_off:
  #     offset: 7
  #     data: [0x02]
  #   command_on:
  #     data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x21, 0x01, 0x00]
  #     ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x21, 0x01, 0x01]
  #   command_off:
  #     data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x21, 0x02, 0x00]
  #     ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x21, 0x02, 0x02]

  # - platform: uartex
  #   name: "Room 2 Plug 2"
  #   icon: "mdi:power-socket-eu"
  #   state:
  #     data: [0x00, 0x01, 0x1F, 0x04, 0x40, 0x22]
  #     mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
  #   state_on:
  #     offset: 7
  #     data: [0x01]
  #   state_off:
  #     offset: 7
  #     data: [0x02]
  #   command_on:
  #     data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x22, 0x01, 0x00]
  #     ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x22, 0x01, 0x01]
  #   command_off:
  #     data: [0x0b, 0x01, 0x1f, 0x02, 0x40, 0x22, 0x02, 0x00]
  #     ack: [0x0b, 0x01, 0x1f, 0x04, 0x40, 0x22, 0x02, 0x02]

###########################################################

valve:
  - platform: uartex
    device_id: kitchen_gas_valve
    name: "Gas Valve"
    device_class: gas
    state:
      data: [0x00, 0x01, 0x1B, 0x01, 0x43, 0x00]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_open:
      offset: 7
      data: [0x04]
    state_closed:
      offset: 7
      data: [0x03]
    # command_open: # 단방향 컨트롤임
    #   data: [0x0b, 0x01, 0x1b, 0x02, 0x43, 0x00, 0x04, 0x00]
    #   ack: [0x0b, 0x01, 0x1b, 0x04, 0x43, 0x00, 0x04, 0x04]
    command_close:
      data: [0x0b, 0x01, 0x1b, 0x02, 0x43, 0x00, 0x03, 0x00]
      ack: [0x0b, 0x01, 0x1b, 0x04, 0x43, 0x00, 0x03, 0x03]

###########################################################

light:
  # 켜짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x13, 0x00, 0x01, 0xb2, 0xee
  # 꺼짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x13, 0x00, 0x02, 0xb1, 0xee
  # 켜짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x13, 0x01, 0x00, 0xb4, 0xee
  # 꺼짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x13, 0x02, 0x00, 0xb7, 0xee
  - platform: uartex
    name: "Room 1 Light 0"
    state:
      data: [0x00, 0x01, 0x19, 0x04, 0x40, 0x10]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_on:
      offset: 7
      data: [0x01]
    state_off:
      offset: 7
      data: [0x02]
    command_on:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x10, 0x01, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x13, 0x01, 0x01]
    command_off:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x10, 0x02, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x10, 0x02, 0x02]

  # 켜짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x11, 0x00, 0x01, 0xb0, 0xee
  # 꺼짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x11, 0x00, 0x02, 0xb3, 0xee
  # 켜짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x11, 0x01, 0x00, 0xb6, 0xee
  # 꺼짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x11, 0x02, 0x00, 0xb5, 0xee
  - platform: uartex
    name: "Room 1 Light 1"
    state:
      data: [0x00, 0x01, 0x19, 0x04, 0x40, 0x11]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_on:
      offset: 7
      data: [0x01]
    state_off:
      offset: 7
      data: [0x02]
    command_on:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x11, 0x01, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x11, 0x01, 0x01]
    command_off:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x11, 0x02, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x11, 0x02, 0x02]

  # 켜짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x12, 0x00, 0x01, 0xb3, 0xee
  # 꺼짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x12, 0x00, 0x02, 0xb0, 0xee
  # 켜짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x12, 0x01, 0x00, 0xb5, 0xee
  # 꺼짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x12, 0x02, 0x00, 0xb6, 0xee
  - platform: uartex
    name: "Room 1 Light 2"
    state:
      data: [0x00, 0x01, 0x19, 0x04, 0x40, 0x12]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_on:
      offset: 7
      data: [0x01]
    state_off:
      offset: 7
      data: [0x02]
    command_on:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x12, 0x01, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x12, 0x01, 0x01]
    command_off:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x12, 0x02, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x12, 0x02, 0x02]

  # 켜짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x14, 0x00, 0x01, 0xb5, 0xee
  # 꺼짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x14, 0x00, 0x02, 0xb6, 0xee
  # 켜짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x14, 0x01, 0x00, 0xb3, 0xee
  # 꺼짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x14, 0x02, 0x00, 0xb0, 0xee
  - platform: uartex
    name: "Room 1 Light 3"
    state:
      data: [0x00, 0x01, 0x19, 0x04, 0x40, 0x13]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_on:
      offset: 7
      data: [0x01]
    state_off:
      offset: 7
      data: [0x02]
    command_on:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x13, 0x01, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x13, 0x01, 0x01]
    command_off:
      data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x13, 0x02, 0x00]
      ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x13, 0x02, 0x02]

  # 켜짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x21, 0x00, 0x01, 0x80, 0xee
  # 꺼짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x21, 0x00, 0x02, 0x83, 0xee
  # 켜짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x21, 0x01, 0x00, 0x86, 0xee
  # 꺼짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x21, 0x02, 0x00, 0x85, 0xee
  # - platform: uartex
  #   name: "Room 2 Light 1"
  #   state:
  #     data: [0x00, 0x01, 0x19, 0x04, 0x40, 0x21]
  #     mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
  #   state_on:
  #     offset: 7
  #     data: [0x01]
  #   state_off:
  #     offset: 7
  #     data: [0x02]
  #   command_on:
  #     data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x21, 0x01, 0x00]
  #     ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x21, 0x01, 0x01]
  #   command_off:
  #     data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x21, 0x02, 0x00]
  #     ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x21, 0x02, 0x02]

  # 켜짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x22, 0x00, 0x01, 0x83, 0xee
  # 꺼짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x22, 0x00, 0x02, 0x80, 0xee
  # 켜짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x22, 0x01, 0x00, 0x85, 0xee
  # 꺼짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x22, 0x02, 0x00, 0x86, 0xee
  # - platform: uartex
  #   name: "Room 2 Light 2"
  #   state:
  #     data: [0x00, 0x01, 0x19, 0x04, 0x40, 0x22]
  #     mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
  #   state_on:
  #     offset: 7
  #     data: [0x01]
  #   state_off:
  #     offset: 7
  #     data: [0x02]
  #   command_on:
  #     data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x22, 0x01, 0x00]
  #     ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x22, 0x01, 0x01]
  #   command_off:
  #     data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x22, 0x02, 0x00]
  #     ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x22, 0x02, 0x02]

  # 켜짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x23, 0x00, 0x01, 0x82, 0xee
  # 꺼짐 상태-> 0xf7, 0x0b, 0x01, 0x19, 0x04, 0x40, 0x23, 0x00, 0x02, 0x81, 0xee
  # 켜짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x23, 0x01, 0x00, 0x84, 0xee
  # 꺼짐 명령-> 0xf7, 0x0b, 0x01, 0x19, 0x02, 0x40, 0x23, 0x02, 0x00, 0x87, 0xee
  # - platform: uartex
  #   name: "Room 2 Light 3"
  #   state:
  #     data: [0x00, 0x01, 0x19, 0x04, 0x40, 0x23]
  #     mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
  #   state_on:
  #     offset: 7
  #     data: [0x01]
  #   state_off:
  #     offset: 7
  #     data: [0x02]
  #   command_on:
  #     data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x23, 0x01, 0x00]
  #     ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x23, 0x01, 0x01]
  #   command_off:
  #     data: [0x0b, 0x01, 0x19, 0x02, 0x40, 0x23, 0x02, 0x00]
  #     ack: [0x0b, 0x01, 0x19, 0x04, 0x40, 0x23, 0x02, 0x02]

# fan:
  # [환기]
  # 켜짐(강) 상태
  # 0xf7, 0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x00, 0x01, 0x07, 0x82, 0xee
  # 켜짐(중) 상태
  # 0xf7, 0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x00, 0x01, 0x03, 0x86, 0xee
  # 켜짐(약) 상태
  # 0xf7, 0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x00, 0x01, 0x01, 0x84, 0xee
  # 꺼짐     상태
  # 0xf7, 0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x00, 0x02, 0x00, 0x86, 0xee
  # 켜짐(강) 명령
  # 0xf7, 0x0b, 0x01, 0x2b, 0x02, 0x40, 0x11, 0x01, 0x00, 0x84, 0xee
  # 켜짐(중) 명령
  # 0xf7, 0x0b, 0x01, 0x2b, 0x02, 0x42, 0x11, 0x03, 0x00, 0x84, 0xee
  # 켜짐(약) 명령
  # 0xf7, 0x0b, 0x01, 0x2b, 0x02, 0x42, 0x11, 0x01, 0x00, 0x86, 0xee
  # 꺼짐     명령
  # 0xf7, 0x0b, 0x01, 0x2b, 0x02, 0x40, 0x11, 0x02, 0x00, 0x87, 0xee
  # - platform: uartex
  #   name: "Room 1 Fan 1"
  #   speed_cnt: 3
  #   state:
  #     data: [0x00, 0x01, 0x2b, 0x04, 0x40, 0x11]
  #     mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
  #   state_on:
  #     offset: 7
  #     data: [0x01]
  #   state_off:
  #     offset: 7
  #     data: [0x02]
  #   command_on:
  #     data: [0x0b, 0x01, 0x2b, 0x02, 0x40, 0x11, 0x01, 0x00]
  #     ack: [0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x01, 0x01, 0x07]
  #   command_off:
  #     data: [0x0b, 0x01, 0x2b, 0x02, 0x40, 0x11, 0x02, 0x00]
  #     ack: [0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x02, 0x02, 0x00]
  #   command_speed: !lambda |-
  #     // @param: const float x
  #.    {
  #       if (x == 3)
  #         return {{
  #           0x0b,0x01,0x2b,0x02,0x40,0x11,0x01,0x00
  #.        }, {
  #           0x0c,0x01,0x2b,0x04,0x40,0x11,0x01,0x01,0x07
  #         }};
  #.      else if (x == 2)
  #         return {{
  #           0x0b,0x01,0x2b,0x02,0x42,0x11,0x03,0x00
  #         }, {
  #.          0x0c,0x01,0x2b,0x04,0x40,0x11,0x01,0x01,0x03
  #         }};
  #       else if (x == 1)
  #         return {{
  #           0x0b,0x01,0x2b,0x02,0x42,0x11,0x01,0x00
  #.        }, {
  #           0x0c,0x01,0x2b,0x04,0x40,0x11,0x01,0x01,0x01
  #         }};
  #.      else
  #         return {};
  #     }
  #   state_speed: !lambda |-
  #     // @param: const uint8_t *data, const unsigned short len
  #     // @return: const float
  #     {
  #       if (data[8] == 0x07) return 3;
  #       else if (data[8] == 0x03) return 2;
  #       else if (data[8] == 0x01) return 1;
  #       else return 0;
  #     }
    # speed: #Option(high, medium, low) -> 없으면 Binary Fan
    #   high:
    #     state:
    #       offset: 7
    #       data: [0x01, 0x07]
    #     command:
    #       data: [0x0b, 0x01, 0x2b, 0x02, 0x40, 0x11, 0x01, 0x00]
    #       ack: [0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x01, 0x01, 0x07]
    #   medium:
    #     state:
    #       offset: 7
    #       data: [0x01, 0x03]
    #     command:
    #       data: [0x0b, 0x01, 0x2b, 0x02, 0x42, 0x11, 0x03, 0x00]
    #       ack: [0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x01, 0x01, 0x03]
    #   low:
    #     state:
    #       offset: 7
    #       data: [0x01, 0x01]
    #     command:
    #       data: [0x0b, 0x01, 0x2b, 0x02, 0x42, 0x11, 0x01, 0x00]
    #       ack: [0x0c, 0x01, 0x2b, 0x04, 0x40, 0x11, 0x01, 0x01, 0x01]

climate:
  # 상태 요청
  # 0xF7,0x0B,0x01,0x18,0x01,0x45,0x11,0x00,0x00,0xB0,0xEE
  # 켜짐 상태: 0xF7,0x0D,0x01,0x18,0x04,0x45,0x11,0x00,
  #   (0x01,0x1B,0x17),0xBE,0xEE
  # 꺼짐 상태: 0xF7,0x0D,0x01,0x18,0x04,0x45,0x11,0x00,
  #   (0x04,0x1B,0x17),0xBB,0xEE
  # 외출 상태: 0xF7,0x0D,0x01,0x18,0x04,0x45,0x11,0x00,
  #   (0x07,0x1B,0x17),0xB9,0xEE
  # 켜짐 명령: 0xF7,0x0B,0x01,0x18,0x02,0x46,0x11,0x01,0x00,
  #   0xB1,0xEE
  #     ACK: 0xF7,0x0D,0x01,0x18,0x04,0x46,0x11,0x01,0x01,
  #       0x1B,0x17,0xBC,0xEE
  # 꺼짐 명령: 0xF7,0x0B,0x01,0x18,0x02,0x46,0x11,0x04,0x00,
  #   0xB4,0xEE
  #     ACK: 0xF7,0x0D,0x01,0x18,0x04,0x46,0x11,0x04,0x04,
  #       0x1B,0x17,0xBC,0xEE
  # 온도 조절: 0xF7,0x0B,0x01,0x18,0x02,0x45,0x11,(0x18),0x00,
  #   0xA7,0xEE
  #     ACK: 0xF7,0x0D,0x01,0x18,0x04,0x45,0x11,(0x18),0x01,
  #       (0x1A,0x18),0xA8,0xEE
  - platform: uartex
    name: "Room 1 Heater 1"
    visual:
      min_temperature: 5 °C
      max_temperature: 40 °C
      temperature_step: 1 °C
    state:
      data: [0x00, 0x01, 0x18, 0x04, 0x45, 0x11]
      mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
    state_temperature_current:
      offset: 8
      length: 1
      precision: 0
    state_temperature_target:
      offset: 9
      length: 1
      precision: 0
    state_off:
      offset: 7
      data: [0x04]
    state_heat:
      offset: 7
      data: [0x01]
    state_preset_away:
      offset: 7
      data: [0x07]
    state_preset_none:
      offset: 7
      data: [0x07]
      inverted: true
    command_off:
      data: [0x0B, 0x01, 0x18, 0x02, 0x46, 0x11, 0x04, 0x00]
      ack: [0x0D, 0x01, 0x18, 0x04, 0x46, 0x11, 0x04, 0x04]
    command_heat:
      data: [0x0B, 0x01, 0x18, 0x02, 0x46, 0x11, 0x01, 0x00]
      ack: [0x0D, 0x01, 0x18, 0x04, 0x46, 0x11, 0x01, 0x01]
    command_preset_away:
      data: [0x0B, 0x01, 0x18, 0x02, 0x46, 0x11, 0x07, 0x00]
      ack: [0x0D, 0x01, 0x18, 0x04, 0x46, 0x11, 0x07, 0x07]
    command_preset_none:
      data: [0x0B, 0x01, 0x18, 0x02, 0x46, 0x11, 0x01, 0x00]
      ack: [0x0D, 0x01, 0x18, 0x04, 0x46, 0x11, 0x01, 0x01]
    command_temperature: !lambda |-
      uint8_t target = x;
      return {{
        0x0B, 0x01, 0x18, 0x02, 0x45, 0x11, target, 0x00
      }, {
        0x0D, 0x01, 0x18, 0x04, 0x45, 0x11, target, 0x01
      }};

################################################################


  # - platform: uartex
  #   name: "Room 1 Air Conditioner 1"
  #   visual:
  #     min_temperature: 5 °C
  #     max_temperature: 40 °C
  #     temperature_step: 1 °C
  #   state:
  #     data: [0x00, 0x01, 0x1C, 0x01, 0x40, 0x11]
  #     mask: [0x00, 0xff, 0xff, 0xff, 0xff, 0xff]
  # Required (끄기 상태)
  #   state_off:
  #     offset: 7
  #     data: [0x04]
  # Required (현재온도 State, RS485 Sensor 설정 참고, sensor:로 대체 가능)
  #   state_temperature_current:
  #     offset: 8
  #     length: 1
  #     precision: 0
  # Required (설정온도 State)
  #   state_temperature_target:
  #     offset: 9
  #     length: 1
  #     precision: 0
  # Option (자동모드: state_auto)
  #   state_auto:
  #     offset: 10
  #     data: [0x00]
  # Option (냉방모드: state_cool)
  #   state_cool:
  #     offset: 10
  #     data: [0x01]
  # Option (제습모드: state_dry)
  #   state_dry:
  #     offset: 10
  #     data: [0x02]
  # Option (송풍모드: state_fan_only)
  #   state_fan_only:
  #     offset: 10
  #     data: [0x03]
  # Option (자동: state_fan_only)
  #   state_fan_auto:
  #     offset: 11
  #     data: [0x01]
  # Option (미풍: state_fan_only)
  #   state_fan_low:
  #     offset: 11
  #     data: [0x02]
  # Option (약풍: state_fan_only)
  #   state_fan_medium:
  #     offset: 11
  #     data: [0x03]
  # Option (강풍: state_fan_only)
  #   state_fan_high:
  #     offset: 11
  #     data: [0x04]
  # Required (끄기 명령)
  #   command_off:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x40, 0x11, 0x02, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x40, 0x11, 0x02, 0x02]
  # Option (자동모드 켜기)
  #   command_auto:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5C, 0x11, 0x00, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5C, 0x11, 0x00, 0x00]
  # Option (냉방모드 켜기)
  #   command_cool:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5C, 0x11, 0x01, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5C, 0x11, 0x01, 0x01]
  # Option (제습모드 켜기)
  #   command_dry:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5C, 0x11, 0x02, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5C, 0x11, 0x02, 0x02]
  # Option (송풍모드 켜기)
  #   command_fan_only:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5C, 0x11, 0x03, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5C, 0x11, 0x03, 0x03]
  # Option (자동 바람 세기 켜기)
  #   command_fan_auto:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5D, 0x11, 0x01, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5D, 0x11, 0x01, 0x01]
  # Option (미풍 켜기)
  #   command_fan_low:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5D, 0x11, 0x02, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5D, 0x11, 0x02, 0x02]
  # Option (약풍 켜기)
  #   command_fan_medium:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5D, 0x11, 0x03, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5D, 0x11, 0x03, 0x03]
  # Option (강풍 켜기)
  #   command_fan_high:
  #     data: [0x0B, 0x01, 0x1C, 0x02, 0x5D, 0x11, 0x04, 0x00]
  #     ack: [0x0D, 0x01, 0x1C, 0x04, 0x5D, 0x11, 0x04, 0x04]
  # Required (온도 조절)
  #   command_temperature: !lambda |-
  #     // @param: const float x
  #     return {
  #               {0x0B, 0x01, 0x1C, 0x02, 0x45, 0x11, (uint8_t)x, 0x00},
  #               {0x0D, 0x01, 0x1C, 0x04, 0x45, 0x11, (uint8_t)x, 0x01}
  #             };

######################################################################
